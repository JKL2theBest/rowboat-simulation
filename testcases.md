# Тест-кейсы для API "Вёсельная лодка"

Тест-кейсы разделены по уровням тестирования и отражают логику, реализованную в API.

## 1. Functional Testing

*Цель: Проверить корректность работы каждого отдельного публичного метода (функции) API в изоляции.*

| ID     | Название                                     | Шаги                                                                                                       | Ожидаемый результат                                                                       | Автоматизирован? (Имя теста)                                              |
|--------|----------------------------------------------|------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|
| **F-01** | Успешная посадка гребца на любую скамью       | 1. Создать лодку.<br>2. Вызвать `add_rower()` с новым гребцом и свободной позицией (`FRONT`/`MIDDLE`/`BACK`). | Метод выполняется без ошибок. Статус лодки показывает гребца на указанном месте.         | Да (`test_add_rower_successfully_to_any_seat`)                            |
| **F-02** | Попытка посадить гребца на занятое место     | 1. Посадить гребца А на позицию `FRONT`.<br>2. Попытаться посадить гребца Б на ту же позицию `FRONT`.          | Выброшено исключение `SeatOccupiedException`.                                             | Да (`test_add_rower_to_occupied_seat_raises_exception`)                   |
| **F-03** | Попытка посадить одного и того же гребца дважды | 1. Посадить гребца А на позицию `FRONT`.<br>2. Попытаться посадить того же гребца А на позицию `MIDDLE`.    | Выброшено исключение `RowboatException` с сообщением, что гребец уже в лодке.              | Да (`test_add_same_rower_twice_raises_exception`)                         |
| **F-04** | Успешное назначение вёсел                    | 1. Посадить гребца на среднюю скамью.<br>2. Вызвать `assign_oars_to_rower()`.                               | Метод выполняется без ошибок. Статус показывает, что вёсла назначены этому гребцу.         | Да (часть `test_system_full_journey_scenario`)                            |
| **F-05** | Попытка назначить вёсла без гребца на среднем месте | 1. Посадить гребца на скамью `FRONT`.<br>2. Вызвать `assign_oars_to_rower()`.                           | Выброшено исключение `OarAssignmentException`.                                            | Да (`test_assign_oars_without_rower_on_middle_seat_raises_exception`)     |
| **F-06** | Попытка назначить вёсла при их недостатке    | 1. Посадить гребца на среднюю скамью.<br>2. Программно убрать вёсла из лодки.<br>3. Вызвать `assign_oars_to_rower()`. | Выброшено исключение `OarAssignmentException`.                                            | Да (`test_assign_oars_with_insufficient_oars_raises_exception`)           |
| **F-07** | Успешное начало гребли (вызов `row()`)      | 1. Посадить гребца на среднюю скамью, назначить ему вёсла.<br>2. Вызвать `row()`.                            | Метод выполняется без ошибок. Флаг `is_moving` становится `True`.                          | Да (`test_successful_rowing_scenario`)                                    |
| **F-08** | Попытка грести без назначенных вёсел         | 1. Посадить гребца на среднюю скамью.<br>2. Вызвать `row()`.                                                 | Выброшено исключение `NoRowersException`.                                                 | Да (`test_row_without_assigned_oars_raises_exception`)                    |
| **F-09** | Управление якорем (`drop`/`raise`)           | 1. Вызвать `drop_anchor()`.<br>2. Проверить статус.<br>3. Вызвать `raise_anchor()`.<br>4. Проверить статус.  | Флаг `is_anchor_dropped` корректно меняется между `True` и `False`.                       | Да (`test_raise_anchor_works_correctly`)                                  |

---

## 2. Integration Testing

*Цель: Проверить взаимодействие между методами и корректность обработки состояний (`is_moving`, `is_anchor_dropped`).*

| ID     | Название                                     | Шаги                                                                                                       | Ожидаемый результат                                                                       | Автоматизирован? (Имя теста)                                              |
|--------|----------------------------------------------|------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|
| **I-01** | Попытка грести с опущенным якорем            | 1. Посадить гребца, назначить вёсла.<br>2. Вызвать `drop_anchor()`.<br>3. Вызвать `row()`.                  | Выброшено исключение `AnchorDroppedException`. Флаг `is_moving` остаётся `False`.         | Да (`test_row_when_anchored_raises_exception`)                            |
| **I-02** | Опускание якоря останавливает движение        | 1. Начать греблю (`is_moving = True`).<br>2. Вызвать `drop_anchor()`.                                      | Флаг `is_moving` становится `False`. Вёсла освобождаются (`rower_with_oars` is `None`).   | Да (`test_drop_anchor_stops_rowing_and_releases_oars`)                    |
| **I-03** | Попытка посадить гребца во время движения    | 1. Начать греблю (`is_moving = True`).<br>2. Попытаться вызвать `add_rower()`.                              | Выброшено исключение `RowboatException`. Лодка продолжает движение.                       | Да (`test_add_rower_while_moving_raises_exception`)                       |
| **I-04** | Идемпотентность действий с якорем            | 1. Вызвать `drop_anchor()` дважды.<br>2. Вызвать `raise_anchor()` дважды.                                   | Второй вызов каждого метода не вызывает ошибку и не меняет состояние системы.             | Да (`test_idempotency_of_anchor_actions`)                                 |

---

## 3. System Testing

*Цель: Проверить систему в целом, эмулируя сценарии использования конечным пользователем ("черный ящик").*

| ID     | Название                                     | Сценарий                                                                                                                              | Ожидаемый результат                                                                                                    | Автоматизирован? (Имя теста)                                              |
|--------|----------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|
| **S-01** | Типичное путешествие (полный цикл)           | 1. Посадить гребца.<br>2. Дать ему вёсла.<br>3. Грести до точки.<br>4. Бросить якорь.<br>5. Поднять якорь.<br>6. Снова дать вёсла и грести. | Все операции выполняются последовательно без сбоев. Состояние лодки (`is_moving`, `is_anchor_dropped`) меняется корректно. | Да (`test_system_full_journey_scenario`)                                  |
| **S-02** | Сценарий максимальной загрузки               | 1. Посадить трёх разных гребцов на все три скамьи.<br>2. Назначить вёсла среднему гребцу.<br>3. Начать греблю.                         | Система корректно обрабатывает максимальное количество сущностей и позволяет выполнить основные действия без сбоев.      | Да (`test_system_max_load_scenario`)                                      |
| **S-03** | Тестирование устойчивости к неверным действиям | 1. Попытаться грести без гребца.<br>2. Попытаться назначить вёсла, когда гребец сидит не на той скамье.<br>3. Попытаться грести с якорем. | Система корректно обрабатывает все невалидные вызовы, выбрасывая ожидаемые исключения и оставаясь в стабильном состоянии. | Да (покрыто набором негативных тестов на функциональном/интеграционном уровне) |