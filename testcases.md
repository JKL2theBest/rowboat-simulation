# Тест-кейсы для API "Вёсельная лодка"

Этот документ описывает тестовые сценарии для API симуляции вёсельной лодки. Тест-кейсы разделены по уровням тестирования: функциональный, интеграционный и системный.

## 1. Функциональное тестирование (Functional Testing)

*Цель: Проверить корректность работы каждого отдельного публичного метода (функции) API в изоляции от других.*

| ID     | Название                                     | Шаги                                                                                                       | Ожидаемый результат                                                                    | Автоматизирован?                                                            |
|--------|----------------------------------------------|------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
| **F-01** | Успешная посадка гребца                      | 1. Создать лодку (`state: IDLE`).<br>2. Вызвать `add_rower()` с новым гребцом и свободной позицией (`FRONT`). | Метод выполняется без ошибок. Статус лодки показывает гребца на указанном месте.      | Да (`test_add_rower_successfully_to_any_seat`)                              |
| **F-02** | Попытка посадить гребца на занятое место     | 1. Создать лодку.<br>2. Посадить гребца А на позицию `MIDDLE`.<br>3. Попытаться посадить гребца Б на позицию `MIDDLE`. | Выброшено исключение `SeatOccupiedException`.                                          | Да (`test_add_rower_to_occupied_seat_raises_exception`)                     |
| **F-03** | Попытка посадить одного и того же гребца дважды | 1. Создать лодку.<br>2. Посадить гребца А на позицию `FRONT`.<br>3. Попытаться посадить гребца А на позицию `MIDDLE`. | Выброшено исключение `RowboatException` с сообщением, что гребец уже в лодке.           | Да (`test_add_same_rower_twice_raises_exception`)                           |
| **F-04** | Успешное назначение вёсел                    | 1. Создать лодку.<br>2. Посадить гребца на среднюю скамью.<br>3. Вызвать `assign_oars_to_rower()`.         | Метод выполняется без ошибок. Статус показывает, что вёсла назначены этому гребцу.      | Да (часть `test_successful_rowing_scenario`)                                |
| **F-05** | Попытка назначить вёсла без гребца на среднем месте | 1. Создать лодку (средняя скамья пуста).<br>2. Вызвать `assign_oars_to_rower()`.                            | Выброшено исключение `OarAssignmentException`.                                         | Да (`test_assign_oars_without_rower_on_middle_seat_raises_exception`)       |
| **F-06** | Успешное начало гребли (вызов `row()`)      | 1. Выполнить шаги F-04.<br>2. Вызвать `row()`.                                                             | Метод выполняется без ошибок. Состояние лодки меняется на `ROWING`.                     | Да (`test_successful_rowing_scenario`)                                      |
| **F-07** | Попытка грести без назначенных вёсел         | 1. Создать лодку.<br>2. Посадить гребца на среднюю скамью.<br>3. Вызвать `row()`.                            | Выброшено исключение `NoRowersException`.                                              | Да (`test_row_without_assigned_oars_raises_exception`)                      |
| **F-08** | Идемпотентность действий (повторный вызов)   | 1. Создать лодку.<br>2. Вызвать `drop_anchor()` дважды.                                                     | Второй вызов метода не вызывает ошибку и не меняет состояние системы.                  | Да (`test_system_stability_with_repeated_actions`)                          |

---

## 2. Интеграционное тестирование (Integration Testing)

*Цель: Проверить взаимодействие между методами и корректность переходов системы между состояниями (`IDLE`, `ROWING`, `ANCHORED`).*

| ID     | Название                                     | Шаги                                                                                                       | Ожидаемый результат                                                                    | Автоматизирован?                                                            |
|--------|----------------------------------------------|------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
| **I-01** | Попытка грести с опущенным якорем            | 1. Посадить гребца, назначить вёсла.<br>2. Вызвать `drop_anchor()` (`state: ANCHORED`).<br>3. Вызвать `row()`. | Выброшено исключение `AnchorDroppedException`. Состояние остаётся `ANCHORED`.          | Да (`test_row_when_anchored_raises_exception`)                              |
| **I-02** | Опускание якоря останавливает движение        | 1. Начать греблю (`state: ROWING`).<br>2. Вызвать `drop_anchor()`.                                         | Состояние лодки меняется на `ANCHORED`. Вёсла освобождаются (`rower_with_oars` is `None`). | Да (`test_drop_anchor_stops_rowing` и `test_system_typical_journey_scenario`) |
| **I-03** | Попытка посадить гребца во время движения    | 1. Начать греблю (`state: ROWING`).<br>2. Попытаться вызвать `add_rower()`.                                 | Выброшено исключение `RowboatException`. Состояние лодки не меняется.                  | Да (`test_integration_add_rower_while_rowing_raises_exception`)             |
| **I-04** | Попытка назначить вёсла с опущенным якорем   | 1. Посадить гребца.<br>2. Вызвать `drop_anchor()` (`state: ANCHORED`).<br>3. Попытаться вызвать `assign_oars_to_rower()`. | Выброшено исключение `RowboatException`. Состояние лодки не меняется.                  | Да (`test_integration_assign_oars_when_anchored_raises_exception`)          |
| **I-05** | Поднятие якоря переводит в состояние `IDLE`  | 1. Вызвать `drop_anchor()` (`state: ANCHORED`).<br>2. Вызвать `raise_anchor()`.                             | Состояние лодки меняется на `IDLE`.                                                    | Да (`test_raise_anchor_changes_state_to_idle`)                              |

---

## 3. Системное тестирование (System Testing)

*Цель: Проверить систему в целом, эмулируя сценарии использования конечным пользователем ("черный ящик").*

| ID     | Название                                     | Сценарий                                                                                                                              | Ожидаемый результат                                                                                                    | Автоматизирован?                                                            |
|--------|----------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
| **S-01** | Типичное путешествие (полный цикл)           | 1. Посадить гребца.<br>2. Дать ему вёсла.<br>3. Грести до точки.<br>4. Бросить якорь.<br>5. Поднять якорь.<br>6. Снова дать вёсла и грести. | Все операции выполняются последовательно без сбоев. Состояния (`IDLE`, `ROWING`, `ANCHORED`) меняются корректно на каждом шаге. | Да (`test_system_typical_journey_scenario`)                                 |
| **S-02** | Сценарий максимальной загрузки               | 1. Посадить трёх разных гребцов на все три скамьи.<br>2. Назначить вёсла среднему гребцу.<br>3. Начать греблю.                         | Система корректно обрабатывает максимальное количество сущностей и позволяет выполнить основные действия. Не падает. | Да (`test_system_load_with_max_rowers`)                                     |
| **S-03** | Тестирование устойчивости к неверным действиям | 1. Попытаться грести без гребца.<br>2. Попытаться назначить вёсла, когда гребец сидит не на той скамье.<br>3. Попытаться грести с якорем. | Система корректно обрабатывает все невалидные вызовы, выбрасывая ожидаемые исключения и оставаясь в стабильном состоянии. | Да (покрыто набором негативных тестов на функциональном/интеграционном уровне) |